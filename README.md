# Substrate nannou template

![](nannou-substrate.png)

[**nannou**](https://nannou.cc/) is open-source creative-coding toolkit for Rust.

This project is a template for creating Non-Fungible in-browser experiences via Substrate + nannou.

The idea is to compile nannou sketches into wasm. The wasm blob is then uploaded into IPFS and the CID is included into
the metadata of an NFT to be minted on a Substrate chain.

A `webpack`-based dApp fetches this metadata from the Substrate chain and displays it as an in-browser experience.

## nannou sketch as NFT

The `nannou` directory contains the nannou sketch. It is the Rust codebase that generates the wasm-based Non-Fungible
in-browser experience.

Please refer to the [official nannou guide](https://guide.nannou.cc/) to learn more about sketches.
```
└── nannou
    ├── Cargo.toml
    └── src
        ├── lib.rs
        └── sketch.rs   <- entrypoint for nannou sketch
```

The template provides a sketch taken from nannou's [Nature of Code](https://github.com/nannou-org/nannou/tree/master/nature_of_code) example sketches.

You should build your sketch via:
```shell
$ wasm-pack build --target bundler
```

Then, upload and pin the contents of `pkg` to IPFS.

For example: [QmTQWJwpSepgVyn48j5KziuuNGKGoYQNStXdGiBqgRgqJt](https://ipfs.io/ipfs/QmTQWJwpSepgVyn48j5KziuuNGKGoYQNStXdGiBqgRgqJt)

### minting the NFT

First, you need to create a collection. You can achieve that via the `create` extrinsic from `pallet-uniques`.

Then, write a `collection-metadata.json` file following this template:
```json
{
  "name": "nannou NFTs",
  "description": "A collection of Non-Fungible in-browser experiences via wasm",
  "image": "ipfs://ipfs/Qmab8QP6rTK8z67EgBdnU6CoZ48YDJvKE4NEHfs8Uardae"
}
```

Here, the CID on the `image` field above is just an image to represent your collection.
You need to submit `collection-metadata.json` to IPFS and generate yet another CID.

For example: [QmZTgVRUoYa4YGtiS7rj6mqsAnj7vWPCuQwCYr3LM9ALjN](https://ipfs.io/ipfs/QmZTgVRUoYa4YGtiS7rj6mqsAnj7vWPCuQwCYr3LM9ALjN)

Then, send a `setCollectionMetadata` extrinsic while using the CID generated by `collection-metadata.json` in the `data` field.

You can then mint different NFT items into your collection via `mint` extrinsic. Then, set the metadata via `setMetadata`
extrinsic, while you should set the `data` field with the CID of the nannou sketch `pkg` directory (e.g.: `QmTQWJwpSepgVyn48j5KziuuNGKGoYQNStXdGiBqgRgqJt` from the first example above).

For every collection item, you can write a different nannou sketch, build it with `wasm-pack`, generate a different CID 
from the `pkg` directory and mint a new NFT!

## dApp

The `dapp` directory contains a dApp that fetches the metadata from the Substrate chain and displays it as an in-browser experience.

## References

This project is heavily inspired by [`github.com/tomoyanonymous/nannou-web-template`](https://github.com/tomoyanonymous/nannou-web-template)